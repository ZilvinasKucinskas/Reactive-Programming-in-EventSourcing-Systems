\documentclass{VUMIFPSmagistrinis}
% \usepackage{algorithmicx}
% \usepackage{algorithm}
% \usepackage{algpseudocode}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{bm}
\usepackage{caption}
\usepackage{color}
\usepackage{float}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{subfig}
\usepackage{wrapfig}

% Default settings for code listings
\lstset{frame=tb,
  language=scala,
  captionpos=b,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  numbers=none,
  numberstyle=\tiny\color{gray},
  %keywordstyle=\color{blue},
  %commentstyle=\color{dkgreen},
  %stringstyle=\color{mauve},
  frame=single,
  breaklines=true,
  breakatwhitespace=true
  tabsize=3
}

\renewcommand{\lstlistingname}{Kodo pavyzdys}

% Titulinio aprašas
\university{Vilniaus universitetas}
\faculty{Matematikos ir informatikos fakultetas}
\department{Programų sistemų katedra}
\papertype{Magistro baigiamasis darbas}
\title{Reaktyvus programavimas įvykių kaupimo sistemose}
\titleineng{Reactive Programming in Eventsourcing Systems}
\author{Žilvinas Kučinskas}
% \secondauthor{Vardonis Pavardonis}   % Pridėti antrą autorių
\supervisor{Viačeslav Pozdniakov}
\reviewer{prof. Rimantas Vaicekauskas}
\date{Vilnius – \the\year}

% Nustatymai
% \setmainfont{Palemonas}   % Pakeisti teksto šriftą į Palemonas (turi būti įdiegtas sistemoje)
\bibliography{bibliografija}

\begin{document}
\maketitle

%% Padėkų skyrius
% \sectionnonumnocontent{}
% \vspace{7cm}
% \begin{center}
%     Padėkos asmenims ir/ar organizacijoms
% \end{center}

\sectionnonumnocontent{Santrauka}

Įvykių kaupimo principu paremtose sistemose dažnai naudojamas komandų-užklausų atskyrimo principas. Kartu, šie principai leidžia kurti reaktyviąsias sistemas, apibrėžtas ``Reaktyvumo manifeste''. Tuo tarpu reaktyvus programavimas leidžia realizuoti reaktyviąsias programas komponavimo būdu, tai yra deklaratyviu stiliumi. Tokiu stiliumi kuriamos programos leidžia atskirti pagrindinę logiką į smulkesnes, lengviau suprantamas dalis. Darbe siekiama sukurti reaktyviojo programavimo programos sąsają, kuri leistų šiuos principus sujungti kartu užtikrinant sistemos atkuriamumą, našumą, reagavimą į įvykius kuriant įvykių kaupimo sistemos skaitymo modelį. Darbe naudojama ``Ruby'' programavimo kalbos sintaksė, parodomas aukšto lygmens architektūros modelis, įgyvendinamas ``Ruby on Rails'' programų kūrimo karkase, panaudojant modelio-kontrolieriaus-vaizdo projektavimo šabloną, reaktyvaus programavimo, įvykių kaupimo bei komandų-užklausų atsakomybių atskyrimo principus. Reaktyvūs filtravimo, transformacijos, srautų sujungimo bei imties mažinimo operatoriai leidžia atskirti dalį domeno logikos į smulkesnius, lengviau suprantamus bei palaikomus komponentus. Ši sąsaja lyginama su modelio-kontrolieriaus-vaizdo projektavimo šablono maršrutizatoriaus paskirtimi.

\raktiniaizodziai{reaktyvus programavimas, įvykių kaupimas, komandų-užklausų atsakomybių atskyrimas, ``Reaktyvumo manifestas''}

\sectionnonumnocontent{Summary}

Systems based on event sourcing principle usually implement command-query responsibility segregation pattern. Together they complement development of reactive systems, which are described in Reactive Manifesto. Whereas reactive programming lets implement reactive systems in declarative style, decomposing logic into small, easier to understand components. Thesis aims to create reactive programming program interface, incorporating both principles, which would react to load, events and failure. In the following thesis, Ruby programming language is being used, high-level architecture, incorporating model-view-controller pattern, reactive programming, event sourcing and command-query responsibility segregation principles is being shown. Reactive filtering, transformation, merging and sampling operators let separate part of domain logic into smaller, easier to understand and maintainable components. This interface is being compared with model-view-controller pattern router's purpose.

\keywords{reactive programming, event sourcing, command-query responsibility segregation, Reactive Manifesto}

\tableofcontents

\section{Įvadas}
\input{sections/introduction}

\section{Reaktyvus programavimas}
\input{sections/reactive_programming}

\section{Įvykių kaupimas}
\input{sections/eventsourcing}

\section{Konceptuali sistema}
\input{sections/practical}

\sectionnonum{Rezultatai ir išvados}

III semestro metu buvo atsisakyta funkcinio reaktyvaus programavimo (FRP) termino darbe (Žiūrėti darbo skyrių - FRP). Kalbama tik apie reaktyvų programavimą. Iš esmės perrašyta literatūros analizė, surasta ir išnagrinėta daug mokslinių šaltinių.

III semestro metu buvo pasiekti šie principiniai \textbf{darbo rezultatai}:

\begin{itemize}
  \item Pasirinkta ``Ruby'' programavimo kalba ir ``Ruby on Rails'' programavimo karkasas kodo pavyzdžiams pateikti.
  \item Išnagrinėtos reaktyvaus programavimo bibliotekų ``RxRuby'' bei ``frapuccino'' realizacija.
  \item Išnagrinėta įvykių kaupimo bibliotekos ``RailsEventStore'' realizacija.
  \item Aprašyta kaip atrodytų įvykių kaupimo sistemos architektūra ``Ruby on Rails'' programavimo karkase, ``Ruby'' kalboje, apjungianti CQRS, ES, reaktyvaus programavimo principus.
  \item Nuspręsta praplėsti ``RailsEventStore'' projektą deklaratyviais operatoriais (įkvėpimas Steve Klabnik ``frappuccino'' biblioteka).
  \item Įvestas įvykių maršrutizatoriaus terminas, aprašyti galimi panaudojimo atvejai ir teikiama nauda pritaikant reaktyvius operatorius.
  \item Išnagrinėtas asinchroninis skaitymo modelio kūrimas.
  \item Užmegztas kontaktas su Pierre-Louis\footnote{https://github.com/gottfrois} - vienas iš pagalbininkų kuriant ``RailsEventStore''. Idėja praplėsti biblioteką galėtų būti gana įdomi.
\end{itemize}

III semestro metu buvo pasiektos šios \textbf{išvados}:

\begin{itemize}
  \item Reaktyvaus programavimo paradigma ``Ruby'' programavimo kalboje iš esmės yra abstrakcija ant stebėtojo ir iteratoriaus šablonų derinio.
  \item Įvykių kaupimo biblioteka ``RailsEventStore'' yra aktyviai kuriama ir palaikoma.
  \item Įvykių kaupimo biblioteka įgyvendina dalį išsikeltų tikslų, tačiau jai trūksta deklaratyvumo, ko pasekoje šiai bibliotekai pritaikomi reaktyvūs operatoriai, taip leidžiantys atskirti dabartines įvykių denormalizatoriaus atsakomybes į smulkesnius, lengviau suprantamus ir palaikomus komponentus.
  \item Įvykių maršrutizatoriuje ir modelio-vaizdo-kontrolieriaus projektavimo šablono maršrutizatoriuje atsakomybės labai panašios ir jas galima palyginti. Reaktyvūs operatoriai leidžia pasiekti sudėtingesnio ``Ruby on Rails'' maršrutizatoriaus galimybes.
  \item Norint kurti skaitymo modelį asinchroniškai, reikia panaudoti papildomas bibliotekas, kurios leidžia vykdyti darbus atskirose gijose tuo pačiu metu, tačiau tada atsiranda apribojimai, kuriuos lemia galutinės darnos principas.
\end{itemize}

\printbibliography[heading=bibintoc]  % Šaltinių sąraše nurodoma panaudota
% literatūra, kitokie šaltiniai. Abėcėlės tvarka išdėstomi darbe panaudotų
% (cituotų, perfrazuotų ar bent paminėtų) mokslo leidinių, kitokių publikacijų
% bibliografiniai aprašai. Šaltinių sąrašas spausdinamas iš naujo puslapio.
% Aprašai pateikiami netransliteruoti.

\sectionnonum{Sąvokų apibrėžimai}
\input{sections/conceptions}

\sectionnonum{Santrumpos ir paaiškinimai}
\input{sections/abbreviations}

\appendix  % Priedai

\section{Conal Elliott - vieši pasisakymai apie termino FRP naudojimą}
% Prieduose gali būti pateikiama pagalbinė, ypač darbo autoriaus savarankiškai
% parengta, medžiaga. Savarankiški priedai gali būti pateikiami ir
% kompaktiniame diske. Priedai taip pat numeruojami ir vadinami. Darbo tekstas
% su priedais susiejamas nuorodomis.

\begin{figure}[H]
    \centering
    \includegraphics[scale=0.5]{img/not_frp1}
    \caption{Conal Eliott - dauguma bibliotekų iš tiesų nėra FRP, kaip jos teigia}
    \label{img:not_frp1}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=0.5]{img/not_frp2}
    \caption{Conal Eliott - dauguma bibliotekų iš tiesų nėra FRP, kaip jos teigia}
    \label{img:not_frp2}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=0.5]{img/not_frp3}
    \caption{Conal Eliott - dauguma bibliotekų iš tiesų nėra FRP, kaip jos teigia}
    \label{img:not_frp3}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=0.5]{img/not_frp4}
    \caption{Conal Eliott - dauguma bibliotekų iš tiesų nėra FRP, kaip jos teigia}
    \label{img:not_frp4}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=0.5]{img/not_frp5}
    \caption{Conal Eliott - dauguma bibliotekų iš tiesų nėra FRP, kaip jos teigia}
    \label{img:not_frp5}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=0.5]{img/not_frp6}
    \caption{Conal Eliott - dauguma bibliotekų iš tiesų nėra FRP, kaip jos teigia}
    \label{img:not_frp6}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=0.5]{img/not_frp7}
    \caption{Conal Eliott - dauguma bibliotekų iš tiesų nėra FRP, kaip jos teigia}
    \label{img:not_frp7}
\end{figure}

\section{Reaktyvaus programavimo bibliotekos Ruby kalboje}

\begin{figure}[H]
    \centering
    \includegraphics[scale=0.35]{img/rxruby}
    \caption{Reaktyvaus programavimo ``RxRuby'' biblioteka}
    \label{img:rxruby}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=0.35]{img/frappuccino}
    \caption{Reaktyvaus programavimo ``Frappuccino'' biblioteka}
    \label{img:frappuccino}
\end{figure}

\section{Įvykių kaupimo bibliotekos Ruby kalboje}

\begin{figure}[H]
    \centering
    \includegraphics[scale=0.35]{img/rails_event_store}
    \caption{``RailsEventStore'' biblioteka įvykių kaupimo sistemoms kurti}
    \label{img:rails_event_store}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=0.35]{img/sandthorn}
    \caption{``Sandthorn'' biblioteka įvykių kaupimo sistemoms kurti}
    \label{img:sandthorn}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[scale=0.35]{img/event_sourced_record}
    \caption{``Event Sourced Record'' biblioteka įvykių kaupimo sistemoms kurti}
    \label{img:event_sourced_record}
\end{figure}

\end{document}
